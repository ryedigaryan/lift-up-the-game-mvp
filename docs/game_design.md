# Lift Up Game - Design Document

## 1. Game Overview
**Lift Up** is a level-based simulation/strategy game where the player manages elevators to transport customers between floors efficiently. The goal is to minimize the total penalty score for each level, which increases based on customer wait times and travel times.

## 2. Core Mechanics

### 2.1. The Building & Levels
*   **Levels**: The game is structured into a series of levels, each with its own unique customer spawn patterns and spawn locations, defined in CSV files (`data/levels/level_*/`).
*   **Floors**: Each level consists of a fixed number of floors (currently 5).
*   **Lifts**: There are two lifts ("A" and "B") that travel vertically between floors.

### 2.2. Customers
Customers appear on floors based on a pre-defined schedule for each level and request transport to a different floor.
*   **States**:
    *   `waiting_for_lift_selection`: Wandering on the floor, waiting for the player to assign a lift.
    *   `walking_to_lift`: Moving towards the assigned lift.
    *   `waiting_at_lift`: Standing at the lift door, waiting for it to arrive/open.
    *   `in_lift`: Inside the lift, traveling to the destination.
    *   `exiting_lift`: Walking away from the lift at the destination spawn point.
    *   `delivered`: Reached the destination and despawned.
*   **Attributes**:
    *   **Target Floor**: The floor the customer wants to go to.
    *   **Priority**: "HIGH" or "LOW", defined per-customer in the level data.

### 2.3. Scoring & History
*   **Penalty System**: The game uses a penalty system where lower is better. The penalty for each customer is calculated based on their wait time and travel time, with higher penalties for high-priority customers.
*   **Game History**: All completed level attempts are saved to `data/output/game_history.csv`. This file stores the level name, final penalty, and a timestamp for each run.

## 3. Game Flow

The game progresses through a series of levels. After each level is completed, the player is presented with a transition screen.

### 3.1. Level Gameplay
*   The player's goal is to serve all customers generated by the level's scenario.
*   A level is complete when all customers in the scenario have been spawned and successfully delivered to their destination floors.

### 3.2. Post-Level Transition Screen
After completing a level, a summary screen appears, showing:
*   The final penalty score for the just-completed run.
*   A history of the last 5 runs for that specific level.
*   A set of navigation buttons:
    *   **Next Level**: Proceeds to the next level in the sequence. (This button is replaced if the final level was just completed).
    *   **Replay**: Restarts the current level.
    *   **Level Select**: Takes the player to the Level Selection screen.
    *   **Show History**: Takes the player to the full Game History screen.
    *   **Exit**: Quits the game.

### 3.3. Level Selection Screen
*   This screen displays a button for every available level discovered by the `LevelsLoader`.
*   Clicking a level button starts that level immediately.

### 3.4. Game History Screen
*   Shown after the final level is completed, or accessed from the transition screen.
*   Displays a summary of the player's **best performance** for each level.
*   Also shows a list of the 10 most **recent runs** across all levels.

## 4. Lift Logic (AI)
The lifts operate using a standard **SCAN (Elevator) Algorithm** to efficiently service requests.
*   **Request Collection**: The lift gathers all pickup requests (from the player) and delivery requests (from passengers inside).
*   **Sequence Generation**: The lift determines the most efficient path to serve all pending requests, prioritizing the current direction of travel before reversing.
*   **Door & Boarding Logic**: The lift opens its doors upon arrival, allows passengers to exit and enter, and then closes them after a short, fixed delay to continue its route.
